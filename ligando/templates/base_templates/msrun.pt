
<html metal:use-macro="load: ../base_layout.pt">
<!DOCTYPE html>
<html lang="${request.locale_name}">
<head>


</head>

<body>


<div class="main_wrapper">
<div class="wrapper">
    <h1 style="text-align: center" id="title"></h1>
    <div style="align-content: center;margin-left: auto; margin-right: auto;">
            <h3>Basic Statistics</h3>
            <table class="info_table" width="25%">
            <tr>
                <td width="50%">Peptides: </td><td id="pep_stat"> </td>
            </tr>
            <tr class="alt">
                <td>Spectra: </td><td id="spec_stat"> </td>
            </tr>
            <tr>
                <td>Proteins: </td><td id="prot_stat"> </td>
            </tr>
            </table>
        <br>
        <h3>Run Information</h3>
        <table class="info_table" width="50%">
            <tr>
                <td width="50%">MS Run Date: </td><td id="ms_run_date"> </td>
            </tr >
            <tr class="alt">
                <td>Used Share: </td><td id="used_share"> </td>
            </tr>
            <tr>
                <td>MS Run Comment: </td><td id="msrun_comment"> </td>
            </tr>
            <tr class="alt">
                <td>Sample Mass: </td><td id="sample_mass"> </td>
            </tr>
            <tr>
                <td>Sample Volume: </td><td id="sample_volume"> </td>
            </tr>
            <tr class="alt">
                <td>Antibody Set: </td><td id="antibody_set"> </td>
            </tr>
            <tr>
                <td>Antibody Mass: </td><td id="antibody_mass"> </td>
            </tr>
            <tr class="alt">
                <td>Magna: </td><td id="magna"> </td>
            </tr>
            <tr>
                <td>Preparation Date: </td><td id="prep_date"> </td>
            </tr >
            <tr class="alt">
                <td>Preparation Comment: </td><td id="prep_comment"> </td>
                </table>
        <br>
        <h3>Source Information</h3>
        <table class="info_table" width="50%">
            <tr>
                <td width="50%">Histology:</td><td id="histology"></td>
            </tr >
            <tr class="alt">
                <td>Dignity:</td><td id="dignity"></td>
            </tr>
            <tr>
                <td>Organ:</td><td id="organ"></td>
            </tr>
            <tr class="alt">
                <td>Organism:</td><td id="organism"></td>
            </tr>
            <tr>
                <td>Celltype:</td><td id="celltype"></td>
            </tr>
            <tr class="alt">
                <td>Location:</td><td id="location"></td>
            </tr>
            <tr>
                <td>Metastatis:</td><td id="metastatis"></td>
            </tr>
            <tr class="alt">
                <td>HLA-Typing: </td><td id="typing"> </td>
            </tr>
            <tr>
                <td>Responsible Person:</td><td id="person"></td>
            </tr >
            <tr class="alt">
                <td>Comment: </td><td id="comment"> </td>

                </table>
    </div>
    </div>
</div>
<br>
<object  width="100%" height="4000px" data="${request.static_url('ligando:static/qcML/samplefile_0_0_8.qcML.xml')}">No Run Quality Report available</object>

<script>
    $(document).ready(
        );
$(document).ready(function() {
    // Setting the title
    document.getElementById("title").innerHTML = ${statistics}[0]["filename"];
    // Setting the statistics
    document.getElementById("pep_stat").innerHTML = "<a title='Show all Peptides'  class='nostylelink' href='javascript:post(\x22../peptide_query\x22, {run_name: document.getElementById(\x22title\x22).innerHTML, grouping:\x22run\x22}," +${statistics}[0]["count_pep"]+ " )'> "+${statistics}[0]["count_pep"]+"</a>";
    // TODO: create spectrum hit query
    document.getElementById("spec_stat").innerHTML = ${statistics}[0]["count_hits"];
    document.getElementById("prot_stat").innerHTML = ${statistics}[0]["count_prot"];
    // extract alles and link them
    var alleles = ${statistics}[0]["hla_category"].split(",");
    var allele_string = "";
    for(var i=0; i<alleles.length; i++){
        var a = alleles[i].trim();
        allele_string = allele_string + "<a class='nostylelink'  href= '/hla/"+a + "'>"+a + "</a>, ";
    }
    document.getElementById("typing").innerHTML = allele_string.slice(0, -2);
    document.getElementById("histology").innerHTML = "<a class='nostylelink'  href= '/histology/"+${statistics}[0]["histology"] + "'>"+${statistics}[0]["histology"]+ "</a>";
    document.getElementById("organ").innerHTML =  "<a class='nostylelink'  href= '/organ/"+${statistics}[0]["organ"] + "'>"+${statistics}[0]["organ"]+ "</a>";
    if(${statistics}[0]["prep_comment"] == ""){
        document.getElementById("comment").innerHTML = "-"
    }else{
        document.getElementById("comment").innerHTML = ${statistics}[0]["comment"];
    }
    document.getElementById("organism").innerHTML = ${statistics}[0]["organism"];
    document.getElementById("dignity").innerHTML = "<a class='nostylelink'  href= '/dignity/"+${statistics}[0]["dignity"] + "'>"+${statistics}[0]["dignity"]+ "</a>";

    document.getElementById("celltype").innerHTML = "<a class='nostylelink'  href= '/celltype/"+${statistics}[0]["celltype"] + "'>"+${statistics}[0]["celltype"]+ "</a>";
    if(${statistics}[0]["location"] == "NA"){
        document.getElementById("location").innerHTML = "-"
    }else{
        document.getElementById("location").innerHTML = ${statistics}[0]["location"];
    }
    // Write Yes or No instead 0 and 1
    if(${statistics}[0]["metastatis"]==0){
        document.getElementById("metastatis").innerHTML = "No"
    }else{
        document.getElementById("metastatis").innerHTML = "Yes"
    }
    document.getElementById("person").innerHTML = "<a class='nostylelink'  href= '/person/"+${statistics}[0]["person"] + "'>"+${statistics}[0]["person"] + "</a>, ";

    document.getElementById("ms_run_date").innerHTML = ${statistics}[0]["ms_run_date"];
    document.getElementById("used_share").innerHTML = ${statistics}[0]["used_share"];
    if(${statistics}[0]["msrun_comment"] == "NULL"){
        document.getElementById("msrun_comment").innerHTML = "-"
    }else{
        document.getElementById("msrun_comment").innerHTML = ${statistics}[0]["msrun_comment"];
    }
    if(${statistics}[0]["sample_mass"] == ""){
        document.getElementById("sample_mass").innerHTML = "-"
    }else{
        document.getElementById("sample_mass").innerHTML = ${statistics}[0]["sample_mass"];
    }
    if(${statistics}[0]["sample_volume"] == ""){
        document.getElementById("sample_volume").innerHTML = "-"
    }else{
        document.getElementById("sample_volume").innerHTML = ${statistics}[0]["sample_volume"];
    }
    document.getElementById("antibody_set").innerHTML = ${statistics}[0]["antibody_set"];
    document.getElementById("antibody_mass").innerHTML = ${statistics}[0]["antibody_mass"];
    document.getElementById("magna").innerHTML = ${statistics}[0]["magna"];
    if(${statistics}[0]["prep_comment"] == ""){
        document.getElementById("prep_date").innerHTML = "-"
    }else{
        document.getElementById("prep_date").innerHTML = ${statistics}[0]["prep_date"];
    }
    if(${statistics}[0]["prep_comment"] == ""){
        document.getElementById("prep_comment").innerHTML = "-"
    }else{
        document.getElementById("prep_comment").innerHTML = ${statistics}[0]["prep_comment"];
    }







});



</script>



</body>

</html>
